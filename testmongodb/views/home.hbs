<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <title>Document</title>
</head>

<body>
  <div style="margin: auto; width: 2000px;">


    <hr>
  <header class=" border-bottom" style="">
    <div class="container-fluid d-grid gap-3 align-items-center" style="grid-template-columns: 1fr 2fr;">
      <div class="dropdown">
        <a href="quanlyip" class="list-group-item list-group-item-action"><img
            src="https://pixlok.com/wp-content/uploads/2021/03/Add-Icon-PNG-Image.jpg" alt="" style="height: 60px;"></a>
      </div>

    </div>
  </header>
  <div style="margin: 0 auto; margin-top: 50px;">
  <div class="container-fluid" style="margin-top: 10px; margin: 0 auto; ">
    <div class="d-flex gap-1" style="grid-template-columns: 1fr 2fr;  ">
      <div class="bg-light rounded-3" style="border:  2px solid rebeccapurple; padding: 10px;">
        <form method="GET" action="/search_ip" style="text-align: center;">
          <div class="mb-1">
            <label class="mb-2 text-muted font-weight-bold">tìm kiếm ip </label>
            <input type="text" class="form-control" name="search" style="border: 1px solid red">
          </div>
          <button type="submit">Tìm kiếm</button>
          
        </form>

        <h2 style="text-align: center;">Danh sách ip</h2>
        <div style="text-align: center;">
 <a style="text-align: center; font-size: 20px ; font-weight: bold; color: brown;">số lượng ip: {{allip.length}}</a>
      </div>
        <table border="1" class="table table-striped table-hover">

      
            <tr style="text-align: center; width: 0px; background-color: rgb(255, 106, 0);">
                <th style="padding: 15px;">Tên Sách</th>
                <th style="padding: 15px;">Hành động</th>
              </tr>
                </table>
        <div style="height: 400px; overflow-y: scroll; text-align: center;" >
         
          <table border="1" class="table table-striped table-hover">
            <thead>
              
            </thead>
            <tbody>
              {{#each allip}}
              <tr style="text-align: center; background-color: rgb(0, 255, 115);">
                <td style="padding: 15px; font-size: 20px; font-weight: bold; background-color: rgb(55, 168, 194);">
                  {{this.Addressip}}</td>
                <td style="padding: 15px;">
                  <a href="update_ip/{{this._id}}" class="btn btn-primary btn-sm" style="margin-right: 10px;">Sửa</a>
                  <a href="xoa_ip/{{this._id}}" onclick="return confirm('Bạn có chắc chắn muốn xóa?')"
                    class="btn btn-danger btn-sm">Xóa</a>
                </td>
              </tr>
              {{/each}}
            </tbody>
          </table>
          {{!--  --}}
          

        </div>

      </div>
<div style="margin-top: 100px; position: absolute; left: 390px;top: 320px; font-size: 20px; font-weight: bold;">Số lượng email còn lại: {{emails.length}}</div>
<div style="height: 262px; overflow-y: scroll; background-color: aqua; margin-right: 1200px;" id="email-list">
  <ul style="list-style-type: square; border: 1px solid black" >
   
    {{#each emails}}
     
      <li style="border: 1px solid black">{{this}}</li>
    {{/each}}
  </ul>
  
</div>
    </div>
    <div class="button-container" >
<form method="POST" action="/updateEmails" class="left-button">
<button onclick="copyText()" type="submit" style="color: blueviolet; font-weight: bold; border: 2px solid rgb(255, 106, 0);">Copy</button>
</form>
<form method="GET" action="/getEmails" class="right-button">
<button onclick="capnhat()" type="submit" style="background-color: rgb(255, 118, 54); color: brown; border-radius: 50%; font-size: 20px;border: 2px solid red; font-weight: bold; width: 40px; height: 40px;">X</button>
</form>
</div>
  </div>
  </div>
  {{#if copysucess}}
<span style="margin-left: 480px; font-size: 20px; font-weight: bold; display: none;" id="copysucess">đã copy!</span>
  {{/if}}




<script>
  function capnhat(){
    const showBtn = document.querySelector('#left-button')
  copyButton.disabled = false;
  }
function copyText() {
   var copyButton = document.getElementsByClassName('left-button');
  copyButton.disabled = true;
  var firstEmail =document.querySelector("#email-list li:first-child");
  var copy=document.getElementById("copysucess");
    copy.style.display = "block";

  if (firstEmail) {
    var emailText = firstEmail.textContent;
    navigator.clipboard.writeText(emailText);
    firstEmail.remove();
    
   
  }
}

</script>

  </div>
</body>
<style>
  .button-container {
  display: flex;
  text-align: center;
  margin-left: 450px;
  margin-top: -350px;
  
}

.left-button {
  margin-right: 10px;
}

.right-button {
  margin-top: -5px;;
  margin-left: 10px;
}

</style>
</html>